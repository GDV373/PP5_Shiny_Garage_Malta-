{% extends "base.html" %}
{% load static %}

{% block extra_title %}Contact Us{% endblock %}

{% block page_header %}
<div class="container header-container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="overlay"></div>
<div class="container">
    <div class="row justify-content-center">        
        <div class="col-12 col-md-6 mt-3">
            <h2 class="logo-font text-center mb-4">Contact Us</h2>
            <hr>
            <form method="POST" id="contact-form">
                {% csrf_token %}
                {{ form|crispy }}
                <button type="button" id="submit-btn" class="btn btn-black rounded-0 text-uppercase float-left mb-2">Send message</button>
            </form>   
        </div>
    </div>
</div>

<script>
    var contactSubmitUrl = "{% url 'contact_submit_url' %}";

    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('submit-btn').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default form submission behavior
            
            // Serialize form data
            var formData = new FormData(document.getElementById('contact-form'));
            
            // Send form data using AJAX
            fetch(contactSubmitUrl, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}'
                }
            })
            .then(response => {
                if (response.ok) {
                    // Handle successful form submission here
                    console.log('Form submitted successfully');
                    // You can redirect or show a success message here
                } else {
                    // Handle form submission errors here
                    console.error('Form submission failed');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    });
</script>

{% endblock %}
